!function(t,e){var n=e.getElementById("layout"),o=e.getElementById("menu"),r=e.getElementById("menuLink"),i=e.getElementById("main");function a(t,e){for(var n=t.className.split(/\s+/),o=n.length,r=0;r<o;r++)if(n[r]===e){n.splice(r,1);break}o===n.length&&n.push(e),t.className=n.join(" ")}function s(t){t.preventDefault(),a(n,"active"),a(o,"active"),a(r,"active")}r.onclick=function(t){s(t)},i.onclick=function(t){-1!==o.className.indexOf("active")&&s(t)}}(0,this.document),function(t){"use strict";var e,n="undefined"==typeof window&&"undefined"!=typeof global&&"function"==typeof require,o=n?t.require:null,r={protocol:"protocol",host:"hostname",port:"port",path:"pathname",query:"search",hash:"hash"},i={ftp:21,gopher:70,http:80,https:443,ws:80,wss:443};function a(){return n?(e||(e="file://"+(process.platform.match(/^win/i)?"/":"")+o("fs").realpathSync(".")),e):document.location.href}function s(t){return encodeURIComponent(t).replace(/'/g,"%27")}function u(t){return(t=(t=(t=t.replace(/\+/g," ")).replace(/%([ef][0-9a-f])%([89ab][0-9a-f])%([89ab][0-9a-f])/gi,(function(t,e,n,o){var r=parseInt(e,16)-224,i=parseInt(n,16)-128;if(0===r&&i<32)return t;var a=(r<<12)+(i<<6)+(parseInt(o,16)-128);return 65535<a?t:String.fromCharCode(a)}))).replace(/%([cd][0-9a-f])%([89ab][0-9a-f])/gi,(function(t,e,n){var o=parseInt(e,16)-192;if(o<2)return t;var r=parseInt(n,16)-128;return String.fromCharCode((o<<6)+r)}))).replace(/%([0-7][0-9a-f])/gi,(function(t,e){return String.fromCharCode(parseInt(e,16))}))}function d(t){for(var e,n=/([^=&]+)(=([^&]*))?/g;e=n.exec(t);){var o=decodeURIComponent(e[1].replace(/\+/g," ")),r=e[3]?u(e[3]):"";void 0!==this[o]&&null!==this[o]?(this[o]instanceof Array||(this[o]=[this[o]]),this[o].push(r)):this[o]=r}}function c(t,e){!function(t,e,s){var p,l,f;e||(e=a()),n?p=o("url").parse(e):(p=document.createElement("a")).href=e;var h,m,y=(m={path:!0,query:!0,hash:!0},(h=e)&&/^[a-z]+:/.test(h)&&(m.protocol=!0,m.host=!0,/[-a-z0-9]+(\.[-a-z0-9])*:\d+/i.test(h)&&(m.port=!0),/\/\/(.*?)(?::(.*?))?@/.test(h)&&(m.user=!0,m.pass=!0)),m);for(l in f=e.match(/\/\/(.*?)(?::(.*?))?@/)||[],r)y[l]?t[l]=p[r[l]]||"":t[l]="";if(t.protocol=t.protocol.replace(/:$/,""),t.query=t.query.replace(/^\?/,""),t.hash=u(t.hash.replace(/^#/,"")),t.user=u(f[1]||""),t.pass=u(f[2]||""),t.port=i[t.protocol]==t.port||0==t.port?"":t.port,!y.protocol&&/[^/#?]/.test(e.charAt(0))&&(t.path=e.split("?")[0].split("#")[0]),!y.protocol&&s){var w=new c(a().match(/(.*\/)/)[0]),g=w.path.split("/"),v=t.path.split("/"),S=["protocol","user","pass","host","port"],$=S.length;for(g.pop(),l=0;l<$;l++)t[S[l]]=w[S[l]];for(;".."===v[0];)g.pop(),v.shift();t.path=("/"!==e.charAt(0)?g.join("/"):"")+"/"+v.join("/")}t.path=t.path.replace(/^\/{2,}/,"/"),t.paths(t.paths()),t.query=new d(t.query)}(this,t,!e)}d.prototype.toString=function(){var t,e,n="",o=s;for(t in this)if(!(this[t]instanceof Function||null===this[t]))if(this[t]instanceof Array){var r=this[t].length;if(r)for(e=0;e<r;e++)n+=n?"&":"",n+=o(t)+"="+o(this[t][e]);else n+=(n?"&":"")+o(t)+"="}else n+=n?"&":"",n+=o(t)+"="+o(this[t]);return n},c.prototype.clearQuery=function(){for(var t in this.query)this.query[t]instanceof Function||delete this.query[t];return this},c.prototype.queryLength=function(){var t,e=0;for(t in this)this[t]instanceof Function||e++;return e},c.prototype.isEmptyQuery=function(){return 0===this.queryLength()},c.prototype.paths=function(t){var e,n="",o=0;if(t&&t.length&&t+""!==t){for(this.isAbsolute()&&(n="/"),e=t.length;o<e;o++)t[o]=!o&&t[o].match(/^\w:$/)?t[o]:s(t[o]);this.path=n+t.join("/")}for(o=0,e=(t=("/"===this.path.charAt(0)?this.path.slice(1):this.path).split("/")).length;o<e;o++)t[o]=u(t[o]);return t},c.prototype.encode=s,c.prototype.decode=u,c.prototype.isAbsolute=function(){return this.protocol||"/"===this.path.charAt(0)},c.prototype.toString=function(){return(this.protocol&&this.protocol+"://")+(this.user&&s(this.user)+(this.pass&&":"+s(this.pass))+"@")+(this.host&&this.host)+(this.port&&":"+this.port)+(this.path&&this.path)+(this.query.toString()&&"?"+this.query)+(this.hash&&"#"+s(this.hash))},t[t.exports?"exports":"Url"]=c}("undefined"!=typeof module&&module.exports?module:window),function(){"use strict";window.Serious=window.Serious||{}}(),function(){"use strict";function t(t,e){e&&"function"==typeof e&&$(document).on(t,(function(t){return e(t)}))}window.Serious.on={startup:function(e){t("ready",e)},data:{start:function(e){t(":data-load-start",e)},loaded:function(e){t(":data-load-end",e)}},episode:{start:function(e){t(":episode-load-start",e)},loaded:function(e){t(":episode-load-end",e)}},render:{start:function(e){t(":render-start",e)},finish:function(e){t(":render-end",e)}}},Serious.on.episode.loaded((function(){$(document).ready((function(){$("#overlay").addClass("hide")}))})),Serious.on.data.loaded((function(){$(document).ready((function(){$("#overlay").addClass("hide")}))}))}(),function(){"use strict";var t="on"===$(document.body).attr("data-debug");function e(t,e){$(document).trigger(Object.assign({type:t},e))}function n(t){return t=Number(t),Number.isNaN(t)&&(t=-1),t}function o(t){var e=new Url;e.clearQuery(),e.query.ep=t,window.location.href=e.toString()}window.Serious.render=function(r,i,a){var s;if(a||(Serious.data?a=Serious.data:console.error("Could not find story data.")),!(s=i?a.meta.find((function(t){return t.id===r})):a.story.find((function(t){return t.episode===r}))))return e(":render-start",{title:"404",content:null}),$("#title").empty().append("404"),$("#subtitle").empty().append("Not found.").show(),void e(":render-end",{title:"404",content:null});e(":episode-load-start",s),$.getJSON((i?"./content/meta/":"./content/episodes/")+s.file,(function(n){t&&console.log("loaded from file",n),e(":episode-load-end",s),function(t){e(":render-start",t),$((function(){$("#title").empty().append((i?"":t.data.episode+": ")+t.data.title),t.data.subtitle?$("#subtitle").empty().append(t.data.subtitle).show():$("#subtitle").hide(),marked(t.content,{smartypants:!0},(function(n,o){$("#content").empty().append(o),e(":render-end",t)}))}))}(n)})),$("#content").attr("data-view","episode"),$(document.body).attr("data-ep",i?"meta":String(r)),i||($("a.nav").hide(),function(t,e){return t=n(t),e.story.some((function(e){var o=n(e.episode);return t+1===o}))}(r,a)&&$("#next").show().on("click",(function(t){o(Number(r)+1)})),function(t,e){return t=n(t),e.story.some((function(e){var o=n(e.episode);return t-1===o}))}(r,a)&&$("#prev").show().on("click",(function(t){o(Number(r)-1)})))},window.Serious.epLink=o,window.Serious.metaLink=function(t){var e=new Url;e.clearQuery(),e.query.meta=t,window.location.href=e.toString()},window.Serious.emit=e,window.Serious.debug=t}(),function(){"use strict";var t=Serious.debug||!1,e=Serious.emit||function(){};function n(t,e){var n=$(document.createElement(t)).addClass(e.classes).append(e.content||"");return delete e.classes,n.attr(e)}var o=n("div",{id:"deck",content:"<h1>Recent Episodes</h1>"});function r(o,r){var i,a;o||(Serious.data?o=Serious.data:console.error("Could not find story data.")),console.log(o),o.story.sort((function(t,e){return Number(t.episode)-Number(e.episode)})),a=r?(i=o.story.reverse()).length>=o.recentMax?o.recentMax:i.length:(i=o.story).length;for(var s=[],u=0;u<a;u++){var d=i[u],c=d.episode,p=n("div",{role:"button",title:"Read more...",classes:"episode-card",name:d.title,"data-goto":c}),l=n("h1",{classes:"episode-title",content:c+": "+d.title}),f=n("h2",{classes:"episode-desc",content:d.description});if(p.append(l,f).on("click",(function(t){t.preventDefault(),Serious.epLink(Number($(this).attr("data-goto")))})),u<(r?o.recentsExcerpts:o.episodesExcerpts)){try{throw p}catch(o){e(":episode-load-start",d),$.getJSON("./content/episodes/"+d.file,(function(r){t&&console.log("loaded from file",r),e(":episode-load-end",d),function(t,o){e(":render-start",t),$((function(){t.data.subtitle&&o.children("h1").after(n("h2",{classes:"episode-subtitle",content:t.data.subtitle})),marked(t.content,{smartypants:!0},(function(r,i){o.append(n("p",{classes:"episode-preview",content:i})),e(":render-end",t)}))}))}(r,o)})),s.push(o)}}else p.append(n("p",{classes:"episode-preview empty",content:"&hellip;"}));s.push(p)}return s}window.Serious=window.Serious||{},window.Serious.recents=function(t){return o.append(r(t,!0))},window.Serious.list=function(t){return o.empty().append("<h1>Episode List</h1>",r(t))}}(),function(){"use strict";Serious.emit(":data-load-start"),$.getJSON("./content/index.json",(function(t){Serious.debug&&console.log("loaded from file",t),function(t){window.Serious.data=t,Serious.emit(":data-load-end",t);var e=t.displayTitle?t.displayTitle:t.title?t.title:"Untitled",n=t.subtitle||"";document.title=e,$((function(){var o,r,i=new Url;if(i.query&&i.query.ep?window.Serious.render(Number(i.query.ep),!1,t):i.query&&i.query.meta?window.Serious.render(i.query.meta.trim().toLowerCase(),!0,t):($("#title").empty().append(e),n?$("#subtitle").empty().append(n).show():$("#subtitle").hide(),i.query&&i.query.list?$("#content").attr("data-view","ream").append(Serious.list(t)):$("#content").attr("data-view","ream").append(Serious.recents(t))),t.copyright&&"string"==typeof t.copyright&&t.copyright.trim()&&$("#user-copyright").empty().append(t.copyright,"<br />"),t.story.length>1&&$("#last-link").parent("li.pure-menu-item").removeClass("hide"),t.meta&&Array.isArray(t.meta)&&t.meta.length&&t.meta.forEach((function(t,e){var n=t.link.trim();"_"!==n&&$("#menu .pure-menu-list").append($(document.createElement("li")).addClass("pure-menu-item"+(0===e?" menu-item-divided":"")).append($(document.createElement("a")).addClass("pure-menu-link").attr({href:"#",title:t.label||""}).append(n).on("click",(function(e){e.preventDefault(),Serious.metaLink(t.id)}))))})),t.links&&Array.isArray(t.links)&&t.links.length>0&&t.links.forEach((function(t,e){t.url&&"string"==typeof t.url&&t.text&&"string"==typeof t.text&&$("#menu .pure-menu-list").append($(document.createElement("li")).addClass("pure-menu-item"+(0===e?" menu-item-divided":"")).append($(document.createElement("a")).addClass("pure-menu-link").attr({href:t.url,target:"_blank",title:t.label||""}).append(t.text)))})),t.disqusShortname&&"string"==typeof t.disqusShortname&&t.disqusShortname.trim()&&"meta"!==$(document.body).attr("data-ep")&&"0"!==$(document.body).attr("data-ep")){$("#title").text().trim().toLowerCase().replace(/[^A-Za-z0-9]*/,"-");o=document,(r=o.createElement("script")).src="https://"+t.disqusShortname.trim()+".disqus.com/embed.js",r.setAttribute("data-timestamp",+new Date),(o.head||o.body).appendChild(r),$("#disqus_thread").removeClass("hide")}}))}(t)}))}(),function(){"use strict";$((function(){$("#first-link").on("click",(function(){return Serious.epLink(1)})),$("#last-link").on("click",(function(){return window.Serious&&window.Serious.data||$(document).on(":data-load-end",(function(t){return Serious.epLink(t.data.story.length)})),Serious.epLink(Serious.data.story.length)}))}))}(),function(){var t=$(document.createElement("div")).attr("id","nsfw-warning"),e=$(document.createElement("a")).attr("id","nsfw-confirm").append("Continue"),n=$(document.createElement("div")).attr("id","overlay").append(t,e);$(document).on(":data-load-end",(function(o){window.localStorage&&"ok"===localStorage.getItem("nsfw")||$((function(){var r,i=o.nsfw,a=18;i&&("boolean"!=typeof i&&(a=i),r="<p>This website contains explicit or sensitive content.</p><p>By continuing, you affirm that you are over the age of "+a+" and willing to see such content.</p>"),r&&(t.append(r),$(document.body).append(n),e.on("click",(function(){window.localStorage&&localStorage.setItem("nsfw","ok"),n.fadeOut(250,(function(){n.remove()}))})))}))}))}();